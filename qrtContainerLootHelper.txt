scn qrtContainerLootHelper

ref tryLootHelper
ref rActor
int isLegal

Begin Function {tryLootHelper}
	set rActor to GetFirstRef 27
	while rActor != 0
		let isLegal := call qrtIsLegalToPickUpFunction rActor
		if isLegal && rActor.GetLocked==0 && rActor.GetContainerInventoryCount >=1 && rActor !=qrtMainLootSafe
			rActor.RemoveAllItems tryLootHelper 1 1
			messageex "%n looted" rActor
		endif
		set rActor to GetNextRef
	loop
End 